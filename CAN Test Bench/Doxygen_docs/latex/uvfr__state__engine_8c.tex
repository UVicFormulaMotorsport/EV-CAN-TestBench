\hypertarget{uvfr__state__engine_8c}{}\doxysection{Core/\+Src/uvfr\+\_\+state\+\_\+engine.c File Reference}
\label{uvfr__state__engine_8c}\index{Core/Src/uvfr\_state\_engine.c@{Core/Src/uvfr\_state\_engine.c}}
{\ttfamily \#include \char`\"{}uvfr\+\_\+utils.\+h\char`\"{}}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{uvfr__state__engine_8c_a6cd439d1fb18334cd13cf3539aebca5c}{U\+V\+F\+R\+\_\+\+S\+T\+A\+T\+E\+\_\+\+M\+A\+C\+H\+I\+N\+E\+\_\+\+I\+M\+P\+L\+I\+M\+E\+N\+T\+A\+T\+I\+ON}}
\item 
\#define \mbox{\hyperlink{uvfr__state__engine_8c_a8a80fe70c2d06583bbcd00c5162860c5}{M\+A\+X\+\_\+\+N\+U\+M\+\_\+\+M\+A\+N\+A\+G\+E\+D\+\_\+\+T\+A\+S\+KS}}~16
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}} \mbox{\hyperlink{uvfr__state__engine_8c_ac9bd88d7c454ec151183930fce544c9c}{state\+\_\+change\+\_\+daemon\+\_\+args}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$ \mbox{\hyperlink{uvfr__state__engine_8c_a99bfc92472cdc99e9005e9d3c792909a}{uv\+Create\+Task}} ()
\begin{DoxyCompactList}\small\item\em This function gets called when you want to create a task, and register it with the task register. Theres some gnarlyness here, but not unacceptable levels. Pray this thing doesn\textquotesingle{}t hang itself. \end{DoxyCompactList}\item 
\mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} \mbox{\hyperlink{uvfr__state__engine_8c_a1fedc882914ef3579d876c512f87506a}{add\+Task\+To\+Task\+Register}} ()
\item 
\mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} \mbox{\hyperlink{uvfr__state__engine_8c_af342326f88e8accc1efa35e02cdd6c37}{\+\_\+uv\+Validate\+Specific\+Task}} (\mbox{\hyperlink{uvfr__state__engine_8h_aa6ffd72eb4909ddb38c37a1369e13f09}{uv\+\_\+task\+\_\+id}} id)
\item 
\mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} \mbox{\hyperlink{uvfr__state__engine_8c_a8c1618caac0d7f29836107f1a44833e8}{uv\+Validate\+Managed\+Tasks}} ()
\begin{DoxyCompactList}\small\item\em ensure that all the tasks people have created actually make sense, and are valid \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_aab5d008f3e7a00fed465245bf5356522}{uv\+Start\+Task}} (uint32\+\_\+t $\ast$tracker, \mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$t)
\begin{DoxyCompactList}\small\item\em \+: This is a function that starts tasks which are already registered in the system \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_ab907ac134ab31a8bcc534b1701304964}{uv\+Init\+State\+Engine}} ()
\begin{DoxyCompactList}\small\item\em Function that prepares the state engine to do its thing. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a415f401ea7985271f803f935d925be34}{uv\+Start\+State\+Machine}} ()
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a20e6d890541b1349d47e1483394357ce}{kill\+Em\+All}} ()
\begin{DoxyCompactList}\small\item\em The name should be pretty self explanatory. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_abfba37ccb4581c98c5df703281b2621f}{uv\+Delete\+Task}} (uint32\+\_\+t $\ast$tracker, \mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$t)
\begin{DoxyCompactList}\small\item\em deletes a managed task via the system \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a5a22d167f39d0ed98e20e2c5429b28fa}{uv\+Suspend\+Task}} (uint32\+\_\+t $\ast$tracker, \mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$t)
\begin{DoxyCompactList}\small\item\em function to suspend one of the managed tasks \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a96aa2907ccf1903b18613447c3e404a3}{uv\+De\+Init\+State\+Engine}} ()
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a34bee422adb65dbf5f923281cf899601}{change\+Vehicle\+State}} (uint16\+\_\+t state)
\begin{DoxyCompactList}\small\item\em Function for changing the state of the vehicle, as well as the list of active + inactive tasks. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{uvfr__state__engine_8c_a37727411bc0a7aeb66e40f63e4866217}{uv\+Panic}} (char $\ast$msg, uint8\+\_\+t msg\+\_\+len)
\begin{DoxyCompactList}\small\item\em Something bad has occurred here now we in trouble. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{uvfr__state__engine_8c_a5f35b34432afed7f18f91fb8607f096f}{kill\+Self}} (\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$t)
\begin{DoxyCompactList}\small\item\em This function is called by a task to nuke itself. Is a wrapper function that is used to do all the different things. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{uvfr__state__engine_8c_ad6117850b55ad52be51d93915bcc313c}{suspend\+Self}} (\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$t)
\begin{DoxyCompactList}\small\item\em Called by a task that needs to suspend itself, once the task has determined it is safe to do so. \end{DoxyCompactList}\item 
\mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} \mbox{\hyperlink{uvfr__state__engine_8c_a204bcb0433ca3449136ffebe74ddddc1}{proccess\+S\+C\+D\+Msg}} (\mbox{\hyperlink{structuv__scd__response}{uv\+\_\+scd\+\_\+response}} $\ast$msg)
\item 
void \mbox{\hyperlink{uvfr__state__engine_8c_a45e3dba55fdad745f7394feb3764cd0a}{\+\_\+state\+Change\+Daemon}} (void $\ast$args)
\begin{DoxyCompactList}\small\item\em \+: This collects all the data changing from different tasks, and makes sure that everything works properly \end{DoxyCompactList}\item 
\mbox{\hyperlink{uvfr__state__engine_8c_afa75451fbb1b78f7a55103a891d3217b}{uv\+Panic}} (N\+U\+LL, 0)
\item 
\mbox{\hyperlink{uvfr__state__engine_8c_ac108d07339f5520787e6e6019335e746}{free}} (args)
\item 
\mbox{\hyperlink{uvfr__state__engine_8c_af521a8374f31062234a38221c8d3c094}{v\+Task\+Delete}} (scd\+\_\+handle)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{uvfr__state__engine_8h_aa6ffd72eb4909ddb38c37a1369e13f09}{uv\+\_\+task\+\_\+id}} \mbox{\hyperlink{uvfr__state__engine_8c_af070a24ce066297b4a8276ddcb884b0c}{\+\_\+next\+\_\+task\+\_\+id}} = 0
\item 
\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} \mbox{\hyperlink{uvfr__state__engine_8c_a6d61ec413dd0559ba8013f00058e7b8a}{\+\_\+task\+\_\+register}} \mbox{[}\mbox{\hyperlink{uvfr__state__engine_8c_a8a80fe70c2d06583bbcd00c5162860c5}{M\+A\+X\+\_\+\+N\+U\+M\+\_\+\+M\+A\+N\+A\+G\+E\+D\+\_\+\+T\+A\+S\+KS}}\mbox{]} = \{0\}
\item 
Queue\+Handle\+\_\+t \mbox{\hyperlink{uvfr__state__engine_8c_a6837d935e61f84062544da8971a18560}{state\+\_\+change\+\_\+queue}} = N\+U\+LL
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4}{uv\+\_\+vehicle\+\_\+state\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a2f58cf65b3566bc390600f877f8bed35}{vehicle\+\_\+state}} = \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff}{U\+V\+\_\+\+B\+O\+OT}}
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4}{uv\+\_\+vehicle\+\_\+state\+\_\+t}} \mbox{\hyperlink{uvfr__state__engine_8c_a2ce6eef16a78c095592954d2fe68af2e}{previous\+\_\+state}} = \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff}{U\+V\+\_\+\+B\+O\+OT}}
\item 
E\+N\+D\+\_\+\+O\+F\+\_\+\+S\+T\+A\+T\+E\+\_\+\+C\+H\+A\+N\+G\+E\+\_\+\+D\+A\+E\+M\+ON \mbox{\hyperlink{uvfr__state__engine_8c_ace69b651a82c623a1302a327e90bab1b}{\+\_\+\+\_\+pad0\+\_\+\+\_\+}}
\item 
i$<$ \mbox{\hyperlink{uvfr__state__engine_8c_af070a24ce066297b4a8276ddcb884b0c}{\+\_\+next\+\_\+task\+\_\+id}};i++)\{ \mbox{\hyperlink{uvfr__state__engine_8c_a6d61ec413dd0559ba8013f00058e7b8a}{\+\_\+task\+\_\+register}}\mbox{[}i\mbox{]}.manager=N\+U\+LL;\} Task\+Handle\+\_\+t scd\+\_\+handle=((\mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}} $\ast$) args) -\/$>$ \mbox{\hyperlink{uvfr__state__engine_8c_adf72ba7c523983f40c8c49f8de261164}{meta\+\_\+task\+\_\+handle}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{uvfr__state__engine_8c_a8a80fe70c2d06583bbcd00c5162860c5}\label{uvfr__state__engine_8c_a8a80fe70c2d06583bbcd00c5162860c5}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!MAX\_NUM\_MANAGED\_TASKS@{MAX\_NUM\_MANAGED\_TASKS}}
\index{MAX\_NUM\_MANAGED\_TASKS@{MAX\_NUM\_MANAGED\_TASKS}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{MAX\_NUM\_MANAGED\_TASKS}{MAX\_NUM\_MANAGED\_TASKS}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+N\+U\+M\+\_\+\+M\+A\+N\+A\+G\+E\+D\+\_\+\+T\+A\+S\+KS~16}



Definition at line 12 of file uvfr\+\_\+state\+\_\+engine.\+c.

\mbox{\Hypertarget{uvfr__state__engine_8c_a6cd439d1fb18334cd13cf3539aebca5c}\label{uvfr__state__engine_8c_a6cd439d1fb18334cd13cf3539aebca5c}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!UVFR\_STATE\_MACHINE\_IMPLIMENTATION@{UVFR\_STATE\_MACHINE\_IMPLIMENTATION}}
\index{UVFR\_STATE\_MACHINE\_IMPLIMENTATION@{UVFR\_STATE\_MACHINE\_IMPLIMENTATION}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{UVFR\_STATE\_MACHINE\_IMPLIMENTATION}{UVFR\_STATE\_MACHINE\_IMPLIMENTATION}}
{\footnotesize\ttfamily \#define U\+V\+F\+R\+\_\+\+S\+T\+A\+T\+E\+\_\+\+M\+A\+C\+H\+I\+N\+E\+\_\+\+I\+M\+P\+L\+I\+M\+E\+N\+T\+A\+T\+I\+ON}



Definition at line 8 of file uvfr\+\_\+state\+\_\+engine.\+c.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{uvfr__state__engine_8c_ac9bd88d7c454ec151183930fce544c9c}\label{uvfr__state__engine_8c_ac9bd88d7c454ec151183930fce544c9c}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!state\_change\_daemon\_args@{state\_change\_daemon\_args}}
\index{state\_change\_daemon\_args@{state\_change\_daemon\_args}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{state\_change\_daemon\_args}{state\_change\_daemon\_args}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}} \mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{uvfr__state__engine_8c_a45e3dba55fdad745f7394feb3764cd0a}\label{uvfr__state__engine_8c_a45e3dba55fdad745f7394feb3764cd0a}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!\_stateChangeDaemon@{\_stateChangeDaemon}}
\index{\_stateChangeDaemon@{\_stateChangeDaemon}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{\_stateChangeDaemon()}{\_stateChangeDaemon()}}
{\footnotesize\ttfamily void \+\_\+state\+Change\+Daemon (\begin{DoxyParamCaption}\item[{void $\ast$}]{args }\end{DoxyParamCaption})}



\+: This collects all the data changing from different tasks, and makes sure that everything works properly 

\begin{DoxyAttention}{Attention}
\+: DO N\+OT E\+V\+ER J\+U\+ST C\+A\+LL T\+H\+IS F\+U\+N\+C\+T\+I\+ON. T\+H\+IS S\+H\+O\+U\+LD O\+N\+LY BE C\+A\+L\+L\+ED F\+R\+OM change\+Vehicle\+State 
\end{DoxyAttention}
We get to iterate through all of the managed tasks. Goes via I\+Ds as well. We load up the array entry as a temp pointer to a task info struct. As we go through it determines what to do by comparing the {\ttfamily \mbox{\hyperlink{structuv__task__info_ab24dea3bde4de2d839bf15e65c2df0d6}{uv\+\_\+task\+\_\+info.\+active\+\_\+states}}} as well as {\ttfamily \mbox{\hyperlink{structuv__task__info_a6986d7216c7f889164931b37ab752c29}{uv\+\_\+task\+\_\+info.\+deletion\+\_\+states}}} and {\ttfamily \mbox{\hyperlink{structuv__task__info_aafd4e2d916f50b54b99fd02d63831e43}{uv\+\_\+task\+\_\+info.\+suspension\+\_\+states}}} with {\ttfamily uv\+\_\+vehicle\+\_\+state} 

This is done with the bitwise \& operator, since the definition of the {\ttfamily uv\+\_\+vehicle\+\_\+state\+\_\+t} enum facilitates this by only using factors of two.

Now we suspend the task because it has been misbehaving in school

Wait for all the tasks that had changes made to respond.
\begin{DoxyCode}{0}
\DoxyCodeLine{ */}
\DoxyCodeLine{}
\DoxyCodeLine{BaseType\_t queue\_read\_status;}
\DoxyCodeLine{\textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{uvfr__state__engine_8h_a2b86418bd482f9d4a2a36f35e786798e}{\_LONGEST\_SC\_TIME}}/\mbox{\hyperlink{uvfr__state__engine_8h_a092c530d4a0cd880a59598dc0fca95d4}{\_SC\_DAEMON\_PERIOD}}; i++)\{}
\DoxyCodeLine{    osDelay(\mbox{\hyperlink{uvfr__state__engine_8h_a092c530d4a0cd880a59598dc0fca95d4}{\_SC\_DAEMON\_PERIOD}});}
\DoxyCodeLine{    \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j<10;j++)\{}
\DoxyCodeLine{        queue\_read\_status = xQueueReceive(incoming\_scd\_msg,\&response,0);}
\DoxyCodeLine{        \textcolor{keywordflow}{if}(queue\_read\_status == pdPASS)\{}
\DoxyCodeLine{            \textcolor{keywordflow}{if}(\mbox{\hyperlink{uvfr__state__engine_8c_a204bcb0433ca3449136ffebe74ddddc1}{proccessSCDMsg}}(\&response)==\mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}})\{}
\DoxyCodeLine{                task\_tracker \&= ~\mbox{\hyperlink{uvfr__utils_8h_a581e5838a8a85f12137dd310b210024d}{\_BV\_32}}(response.meta\_id);}
\DoxyCodeLine{            \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{                \textcolor{comment}{//Not ok, idek what to do here}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{}
\DoxyCodeLine{        \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{            \textcolor{keywordflow}{break};}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    \}}
\end{DoxyCode}


If this is 0, then that means that all the tasks have successfully had their states validated. This means we can just exit and we\textquotesingle{}re chillin.

Definition at line 501 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+\+B\+V\+\_\+32, \+\_\+\+L\+O\+N\+G\+E\+S\+T\+\_\+\+S\+C\+\_\+\+T\+I\+ME, \+\_\+next\+\_\+task\+\_\+id, \+\_\+\+S\+C\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+P\+E\+R\+I\+OD, \+\_\+task\+\_\+register, uv\+\_\+task\+\_\+info\+::active\+\_\+states, uv\+\_\+task\+\_\+info\+::deletion\+\_\+states, uv\+\_\+task\+\_\+info\+::manager, uv\+\_\+scd\+\_\+response\+::meta\+\_\+id, proccess\+S\+C\+D\+Msg(), uv\+\_\+task\+\_\+info\+::suspension\+\_\+states, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+OK, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+D\+E\+L\+E\+T\+ED, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+N\+O\+T\+\_\+\+S\+T\+A\+R\+T\+ED, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+R\+U\+N\+N\+I\+NG, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+S\+U\+S\+P\+E\+N\+D\+ED, uv\+Delete\+Task(), uv\+Panic(), uv\+Start\+Task(), uv\+Suspend\+Task(), and vehicle\+\_\+state.



Referenced by change\+Vehicle\+State().

\mbox{\Hypertarget{uvfr__state__engine_8c_af342326f88e8accc1efa35e02cdd6c37}\label{uvfr__state__engine_8c_af342326f88e8accc1efa35e02cdd6c37}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!\_uvValidateSpecificTask@{\_uvValidateSpecificTask}}
\index{\_uvValidateSpecificTask@{\_uvValidateSpecificTask}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{\_uvValidateSpecificTask()}{\_uvValidateSpecificTask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} \+\_\+uv\+Validate\+Specific\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{uvfr__state__engine_8h_aa6ffd72eb4909ddb38c37a1369e13f09}{uv\+\_\+task\+\_\+id}}}]{id }\end{DoxyParamCaption})}



Definition at line 75 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+task\+\_\+register, uv\+\_\+task\+\_\+info\+::active\+\_\+states, uv\+\_\+task\+\_\+info\+::deletion\+\_\+states, uv\+\_\+task\+\_\+info\+::instances, uv\+\_\+task\+\_\+info\+::suspension\+\_\+states, uv\+\_\+task\+\_\+info\+::task\+\_\+function, uv\+\_\+task\+\_\+info\+::task\+\_\+name, and U\+V\+\_\+\+OK.



Referenced by uv\+Validate\+Managed\+Tasks().

\mbox{\Hypertarget{uvfr__state__engine_8c_a1fedc882914ef3579d876c512f87506a}\label{uvfr__state__engine_8c_a1fedc882914ef3579d876c512f87506a}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!addTaskToTaskRegister@{addTaskToTaskRegister}}
\index{addTaskToTaskRegister@{addTaskToTaskRegister}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{addTaskToTaskRegister()}{addTaskToTaskRegister()}}
{\footnotesize\ttfamily \mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} add\+Task\+To\+Task\+Register (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 71 of file uvfr\+\_\+state\+\_\+engine.\+c.

\mbox{\Hypertarget{uvfr__state__engine_8c_a34bee422adb65dbf5f923281cf899601}\label{uvfr__state__engine_8c_a34bee422adb65dbf5f923281cf899601}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!changeVehicleState@{changeVehicleState}}
\index{changeVehicleState@{changeVehicleState}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{changeVehicleState()}{changeVehicleState()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} change\+Vehicle\+State (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{state }\end{DoxyParamCaption})}



Function for changing the state of the vehicle, as well as the list of active + inactive tasks. 

This function also changes out the tasks that are executing. If the state we wish to change to is the same as the state we\textquotesingle{}re in, then no need to be executing any of this fancy code

Transition from {\ttfamily U\+V\+\_\+\+I\+N\+IT} to {\ttfamily U\+V\+\_\+\+R\+E\+A\+DY} states

Transition from {\ttfamily U\+V\+\_\+\+I\+N\+IT} to {\ttfamily U\+V\+\_\+\+E\+R\+R\+OR} states

Definition at line 315 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+state\+Change\+Daemon(), \+\_\+\+U\+V\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+T\+A\+S\+K\+\_\+\+S\+T\+A\+C\+K\+\_\+\+S\+I\+ZE, state\+\_\+change\+\_\+daemon\+\_\+args\+::meta\+\_\+task\+\_\+handle, previous\+\_\+state, U\+V\+\_\+\+A\+B\+O\+R\+T\+ED, U\+V\+\_\+\+B\+O\+OT, U\+V\+\_\+\+D\+R\+I\+V\+I\+NG, U\+V\+\_\+\+E\+R\+R\+O\+R\+\_\+\+S\+T\+A\+TE, U\+V\+\_\+\+I\+N\+IT, U\+V\+\_\+\+L\+A\+U\+N\+C\+H\+\_\+\+C\+O\+N\+T\+R\+OL, U\+V\+\_\+\+OK, U\+V\+\_\+\+R\+E\+A\+DY, uv\+Panic(), and vehicle\+\_\+state.



Referenced by uv\+Init().

\mbox{\Hypertarget{uvfr__state__engine_8c_ac108d07339f5520787e6e6019335e746}\label{uvfr__state__engine_8c_ac108d07339f5520787e6e6019335e746}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!free@{free}}
\index{free@{free}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily free (\begin{DoxyParamCaption}\item[{args}]{ }\end{DoxyParamCaption})}



Referenced by uv\+Init().

\mbox{\Hypertarget{uvfr__state__engine_8c_a20e6d890541b1349d47e1483394357ce}\label{uvfr__state__engine_8c_a20e6d890541b1349d47e1483394357ce}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!killEmAll@{killEmAll}}
\index{killEmAll@{killEmAll}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{killEmAll()}{killEmAll()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} kill\+Em\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



The name should be pretty self explanatory. 



Definition at line 211 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+\+B\+V\+\_\+32, \+\_\+next\+\_\+task\+\_\+id, \+\_\+task\+\_\+register, U\+V\+\_\+\+E\+R\+R\+OR, U\+V\+\_\+\+OK, and uv\+Delete\+Task().



Referenced by uv\+De\+Init\+State\+Engine().

\mbox{\Hypertarget{uvfr__state__engine_8c_a5f35b34432afed7f18f91fb8607f096f}\label{uvfr__state__engine_8c_a5f35b34432afed7f18f91fb8607f096f}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!killSelf@{killSelf}}
\index{killSelf@{killSelf}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{killSelf()}{killSelf()}}
{\footnotesize\ttfamily void kill\+Self (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$}]{t }\end{DoxyParamCaption})}



This function is called by a task to nuke itself. Is a wrapper function that is used to do all the different things. 

First lets load up the queue and the values in it. These come from the task we are doing.

Definition at line 384 of file uvfr\+\_\+state\+\_\+engine.\+c.



References uv\+\_\+task\+\_\+info\+::cmd\+\_\+data, uv\+\_\+task\+\_\+info\+::manager, uv\+\_\+scd\+\_\+response\+::meta\+\_\+id, uv\+\_\+scd\+\_\+response\+::response\+\_\+val, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+id, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+N\+O\+\_\+\+C\+MD, U\+V\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+U\+L\+\_\+\+D\+E\+L\+E\+T\+I\+ON, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+D\+E\+L\+E\+T\+ED, and v\+Task\+Delete().

\mbox{\Hypertarget{uvfr__state__engine_8c_a204bcb0433ca3449136ffebe74ddddc1}\label{uvfr__state__engine_8c_a204bcb0433ca3449136ffebe74ddddc1}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!proccessSCDMsg@{proccessSCDMsg}}
\index{proccessSCDMsg@{proccessSCDMsg}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{proccessSCDMsg()}{proccessSCDMsg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} proccess\+S\+C\+D\+Msg (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structuv__scd__response}{uv\+\_\+scd\+\_\+response}} $\ast$}]{msg }\end{DoxyParamCaption})}



Definition at line 449 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+task\+\_\+register, uv\+\_\+scd\+\_\+response\+::meta\+\_\+id, uv\+\_\+scd\+\_\+response\+::response\+\_\+val, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+C\+O\+U\+L\+D\+N\+T\+\_\+\+D\+E\+L\+E\+TE, U\+V\+\_\+\+C\+O\+U\+L\+D\+N\+T\+\_\+\+S\+U\+S\+P\+E\+ND, U\+V\+\_\+\+E\+R\+R\+OR, U\+V\+\_\+\+OK, U\+V\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+U\+L\+\_\+\+D\+E\+L\+E\+T\+I\+ON, U\+V\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+U\+L\+\_\+\+S\+U\+S\+P\+E\+N\+S\+I\+ON, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+D\+E\+L\+E\+T\+ED, and U\+V\+\_\+\+U\+N\+S\+A\+F\+E\+\_\+\+S\+T\+A\+TE.



Referenced by \+\_\+state\+Change\+Daemon().

\mbox{\Hypertarget{uvfr__state__engine_8c_ad6117850b55ad52be51d93915bcc313c}\label{uvfr__state__engine_8c_ad6117850b55ad52be51d93915bcc313c}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!suspendSelf@{suspendSelf}}
\index{suspendSelf@{suspendSelf}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{suspendSelf()}{suspendSelf()}}
{\footnotesize\ttfamily void suspend\+Self (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$}]{t }\end{DoxyParamCaption})}



Called by a task that needs to suspend itself, once the task has determined it is safe to do so. 



Definition at line 424 of file uvfr\+\_\+state\+\_\+engine.\+c.



References uv\+\_\+task\+\_\+info\+::cmd\+\_\+data, uv\+\_\+task\+\_\+info\+::manager, uv\+\_\+scd\+\_\+response\+::meta\+\_\+id, uv\+\_\+scd\+\_\+response\+::response\+\_\+val, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+id, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+N\+O\+\_\+\+C\+MD, U\+V\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+U\+L\+\_\+\+D\+E\+L\+E\+T\+I\+ON, and U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+D\+E\+L\+E\+T\+ED.

\mbox{\Hypertarget{uvfr__state__engine_8c_a99bfc92472cdc99e9005e9d3c792909a}\label{uvfr__state__engine_8c_a99bfc92472cdc99e9005e9d3c792909a}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvCreateTask@{uvCreateTask}}
\index{uvCreateTask@{uvCreateTask}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvCreateTask()}{uvCreateTask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}}$\ast$ uv\+Create\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function gets called when you want to create a task, and register it with the task register. Theres some gnarlyness here, but not unacceptable levels. Pray this thing doesn\textquotesingle{}t hang itself. 

Do not exceed the number of tasks available

Acquire the pointer to the spot in the array, we are doing this since we need to return the pointer anyways

Definition at line 28 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+next\+\_\+task\+\_\+id, \+\_\+task\+\_\+register, \+\_\+\+U\+V\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+T\+A\+S\+K\+\_\+\+I\+N\+S\+T\+A\+N\+C\+ES, \+\_\+\+U\+V\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+T\+A\+S\+K\+\_\+\+S\+T\+A\+C\+K\+\_\+\+S\+I\+ZE, uv\+\_\+task\+\_\+info\+::active\+\_\+states, uv\+\_\+task\+\_\+info\+::deletion\+\_\+states, uv\+\_\+task\+\_\+info\+::instances, M\+A\+X\+\_\+\+N\+U\+M\+\_\+\+M\+A\+N\+A\+G\+E\+D\+\_\+\+T\+A\+S\+KS, uv\+\_\+task\+\_\+info\+::next, uv\+\_\+task\+\_\+info\+::stack\+\_\+size, uv\+\_\+task\+\_\+info\+::suspension\+\_\+states, uv\+\_\+task\+\_\+info\+::task\+\_\+function, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+id, uv\+\_\+task\+\_\+info\+::task\+\_\+name, uv\+\_\+task\+\_\+info\+::task\+\_\+priority, uv\+\_\+task\+\_\+info\+::task\+\_\+state, and U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+N\+O\+T\+\_\+\+S\+T\+A\+R\+T\+ED.



Referenced by init\+Driving\+Loop(), and init\+Temp\+Monitor().

\mbox{\Hypertarget{uvfr__state__engine_8c_a96aa2907ccf1903b18613447c3e404a3}\label{uvfr__state__engine_8c_a96aa2907ccf1903b18613447c3e404a3}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvDeInitStateEngine@{uvDeInitStateEngine}}
\index{uvDeInitStateEngine@{uvDeInitStateEngine}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvDeInitStateEngine()}{uvDeInitStateEngine()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+De\+Init\+State\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 294 of file uvfr\+\_\+state\+\_\+engine.\+c.



References kill\+Em\+All(), and U\+V\+\_\+\+OK.

\mbox{\Hypertarget{uvfr__state__engine_8c_abfba37ccb4581c98c5df703281b2621f}\label{uvfr__state__engine_8c_abfba37ccb4581c98c5df703281b2621f}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvDeleteTask@{uvDeleteTask}}
\index{uvDeleteTask@{uvDeleteTask}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvDeleteTask()}{uvDeleteTask()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+Delete\+Task (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{tracker,  }\item[{\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$}]{t }\end{DoxyParamCaption})}



deletes a managed task via the system 

This function is the lowtier god of the program. It pulls up and is like \char`\"{}\+Y\+O\+U S\+H\+O\+U\+L\+D K\+I\+L\+L Y\+O\+U\+R\+S\+E\+L\+F, N\+O\+W!!\char`\"{} It sends a message to the task which tells it to kill itself. if we have reached this point in the function, then the task is active and ready to get nuked

Definition at line 232 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+\+B\+V\+\_\+32, uv\+\_\+task\+\_\+info\+::cmd\+\_\+data, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+id, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+A\+B\+O\+R\+T\+ED, U\+V\+\_\+\+E\+R\+R\+OR, U\+V\+\_\+\+K\+I\+L\+L\+\_\+\+C\+MD, U\+V\+\_\+\+OK, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+D\+E\+L\+E\+T\+ED, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+N\+O\+T\+\_\+\+S\+T\+A\+R\+T\+ED, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+S\+U\+S\+P\+E\+N\+D\+ED, and v\+Task\+Delete().



Referenced by \+\_\+state\+Change\+Daemon(), and kill\+Em\+All().

\mbox{\Hypertarget{uvfr__state__engine_8c_ab907ac134ab31a8bcc534b1701304964}\label{uvfr__state__engine_8c_ab907ac134ab31a8bcc534b1701304964}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvInitStateEngine@{uvInitStateEngine}}
\index{uvInitStateEngine@{uvInitStateEngine}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvInitStateEngine()}{uvInitStateEngine()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+Init\+State\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Function that prepares the state engine to do its thing. 

Who even fucking knows at this point 

Definition at line 189 of file uvfr\+\_\+state\+\_\+engine.\+c.



References init\+Daq\+Task(), init\+Driving\+Loop(), init\+Temp\+Monitor(), and U\+V\+\_\+\+OK.



Referenced by uv\+Init().

\mbox{\Hypertarget{uvfr__state__engine_8c_a37727411bc0a7aeb66e40f63e4866217}\label{uvfr__state__engine_8c_a37727411bc0a7aeb66e40f63e4866217}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvPanic@{uvPanic}}
\index{uvPanic@{uvPanic}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvPanic()}{uvPanic()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void uv\+Panic (\begin{DoxyParamCaption}\item[{char $\ast$}]{msg,  }\item[{uint8\+\_\+t}]{msg\+\_\+len }\end{DoxyParamCaption})}



Something bad has occurred here now we in trouble. 



Definition at line 373 of file uvfr\+\_\+state\+\_\+engine.\+c.



Referenced by \+\_\+state\+Change\+Daemon(), change\+Vehicle\+State(), uv\+Init(), and uv\+Suspend\+Task().

\mbox{\Hypertarget{uvfr__state__engine_8c_afa75451fbb1b78f7a55103a891d3217b}\label{uvfr__state__engine_8c_afa75451fbb1b78f7a55103a891d3217b}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvPanic@{uvPanic}}
\index{uvPanic@{uvPanic}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvPanic()}{uvPanic()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily uv\+Panic (\begin{DoxyParamCaption}\item[{N\+U\+LL}]{,  }\item[{0}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{uvfr__state__engine_8c_a415f401ea7985271f803f935d925be34}\label{uvfr__state__engine_8c_a415f401ea7985271f803f935d925be34}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvStartStateMachine@{uvStartStateMachine}}
\index{uvStartStateMachine@{uvStartStateMachine}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvStartStateMachine()}{uvStartStateMachine()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+Start\+State\+Machine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Actually starts up the state engine to do state engine things 

Definition at line 204 of file uvfr\+\_\+state\+\_\+engine.\+c.



References U\+V\+\_\+\+OK.

\mbox{\Hypertarget{uvfr__state__engine_8c_aab5d008f3e7a00fed465245bf5356522}\label{uvfr__state__engine_8c_aab5d008f3e7a00fed465245bf5356522}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvStartTask@{uvStartTask}}
\index{uvStartTask@{uvStartTask}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvStartTask()}{uvStartTask()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+Start\+Task (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{tracker,  }\item[{\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$}]{t }\end{DoxyParamCaption})}



\+: This is a function that starts tasks which are already registered in the system 

This bad boi gets called from the state\+Change\+Daemon because it\textquotesingle{}s a special little snowflake. The first thing we will do is check

If a task has been suspended, we do not want to create a new instance of the task, becuase then the task will go out of scope, and changing the task handle to a new instance will result in the task never being de-\/initialized, therefore causing a memory leak. If a task is in this boat then that\textquotesingle{}s what will happen.

If none of the previous if statements caught the task handle, then that means that either this is our first time attempting to activate this task, or the task has been deleted at some point prior to this one

The function {\ttfamily os\+Thread\+Create} returns null if it fails to create a thread. If that happens, we really do have a problem, so we will be returning an error value

Definition at line 121 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+\+B\+V\+\_\+32, uv\+\_\+task\+\_\+info\+::stack\+\_\+size, uv\+\_\+task\+\_\+info\+::task\+\_\+function, uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+id, uv\+\_\+task\+\_\+info\+::task\+\_\+name, uv\+\_\+task\+\_\+info\+::task\+\_\+priority, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+A\+B\+O\+R\+T\+ED, U\+V\+\_\+\+E\+R\+R\+OR, U\+V\+\_\+\+OK, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+R\+U\+N\+N\+I\+NG, and U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+S\+U\+S\+P\+E\+N\+D\+ED.



Referenced by \+\_\+state\+Change\+Daemon().

\mbox{\Hypertarget{uvfr__state__engine_8c_a5a22d167f39d0ed98e20e2c5429b28fa}\label{uvfr__state__engine_8c_a5a22d167f39d0ed98e20e2c5429b28fa}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvSuspendTask@{uvSuspendTask}}
\index{uvSuspendTask@{uvSuspendTask}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvSuspendTask()}{uvSuspendTask()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} uv\+Suspend\+Task (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{tracker,  }\item[{\mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} $\ast$}]{t }\end{DoxyParamCaption})}



function to suspend one of the managed tasks 



Definition at line 281 of file uvfr\+\_\+state\+\_\+engine.\+c.



References uv\+\_\+task\+\_\+info\+::task\+\_\+handle, uv\+\_\+task\+\_\+info\+::task\+\_\+state, U\+V\+\_\+\+OK, U\+V\+\_\+\+T\+A\+S\+K\+\_\+\+S\+U\+S\+P\+E\+N\+D\+ED, and uv\+Panic().



Referenced by \+\_\+state\+Change\+Daemon().

\mbox{\Hypertarget{uvfr__state__engine_8c_a8c1618caac0d7f29836107f1a44833e8}\label{uvfr__state__engine_8c_a8c1618caac0d7f29836107f1a44833e8}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!uvValidateManagedTasks@{uvValidateManagedTasks}}
\index{uvValidateManagedTasks@{uvValidateManagedTasks}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{uvValidateManagedTasks()}{uvValidateManagedTasks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{uvfr__state__engine_8h_a27e96c74597bf4e85f968da673622b31}{uv\+\_\+status}} uv\+Validate\+Managed\+Tasks (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



ensure that all the tasks people have created actually make sense, and are valid 



Definition at line 99 of file uvfr\+\_\+state\+\_\+engine.\+c.



References \+\_\+next\+\_\+task\+\_\+id, \+\_\+uv\+Validate\+Specific\+Task(), and U\+V\+\_\+\+OK.

\mbox{\Hypertarget{uvfr__state__engine_8c_af521a8374f31062234a38221c8d3c094}\label{uvfr__state__engine_8c_af521a8374f31062234a38221c8d3c094}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!vTaskDelete@{vTaskDelete}}
\index{vTaskDelete@{vTaskDelete}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{vTaskDelete()}{vTaskDelete()}}
{\footnotesize\ttfamily v\+Task\+Delete (\begin{DoxyParamCaption}\item[{scd\+\_\+handle}]{ }\end{DoxyParamCaption})}

This line deletes the queue to free up the memory
\begin{DoxyCode}{0}
\DoxyCodeLine{ */}
\DoxyCodeLine{}
\DoxyCodeLine{vQueueDelete(incoming\_scd\_msg);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/**}}
\end{DoxyCode}
 

Referenced by kill\+Self(), uv\+Delete\+Task(), and uv\+Init().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{uvfr__state__engine_8c_ace69b651a82c623a1302a327e90bab1b}\label{uvfr__state__engine_8c_ace69b651a82c623a1302a327e90bab1b}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!\_\_pad0\_\_@{\_\_pad0\_\_}}
\index{\_\_pad0\_\_@{\_\_pad0\_\_}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{\_\_pad0\_\_}{\_\_pad0\_\_}}
{\footnotesize\ttfamily E\+N\+D\+\_\+\+O\+F\+\_\+\+S\+T\+A\+T\+E\+\_\+\+C\+H\+A\+N\+G\+E\+\_\+\+D\+A\+E\+M\+ON \+\_\+\+\_\+pad0\+\_\+\+\_\+}



Definition at line 590 of file uvfr\+\_\+state\+\_\+engine.\+c.

\mbox{\Hypertarget{uvfr__state__engine_8c_af070a24ce066297b4a8276ddcb884b0c}\label{uvfr__state__engine_8c_af070a24ce066297b4a8276ddcb884b0c}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!\_next\_task\_id@{\_next\_task\_id}}
\index{\_next\_task\_id@{\_next\_task\_id}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{\_next\_task\_id}{\_next\_task\_id}}
{\footnotesize\ttfamily \mbox{\hyperlink{uvfr__state__engine_8h_aa6ffd72eb4909ddb38c37a1369e13f09}{uv\+\_\+task\+\_\+id}} \+\_\+next\+\_\+task\+\_\+id = 0}



Definition at line 14 of file uvfr\+\_\+state\+\_\+engine.\+c.



Referenced by \+\_\+state\+Change\+Daemon(), kill\+Em\+All(), uv\+Create\+Task(), and uv\+Validate\+Managed\+Tasks().

\mbox{\Hypertarget{uvfr__state__engine_8c_a6d61ec413dd0559ba8013f00058e7b8a}\label{uvfr__state__engine_8c_a6d61ec413dd0559ba8013f00058e7b8a}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!\_task\_register@{\_task\_register}}
\index{\_task\_register@{\_task\_register}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{\_task\_register}{\_task\_register}}
{\footnotesize\ttfamily \mbox{\hyperlink{structuv__task__info}{uv\+\_\+task\+\_\+info}} \+\_\+task\+\_\+register\mbox{[}\mbox{\hyperlink{uvfr__state__engine_8c_a8a80fe70c2d06583bbcd00c5162860c5}{M\+A\+X\+\_\+\+N\+U\+M\+\_\+\+M\+A\+N\+A\+G\+E\+D\+\_\+\+T\+A\+S\+KS}}\mbox{]} = \{0\}}



Definition at line 15 of file uvfr\+\_\+state\+\_\+engine.\+c.



Referenced by \+\_\+state\+Change\+Daemon(), \+\_\+uv\+Validate\+Specific\+Task(), kill\+Em\+All(), proccess\+S\+C\+D\+Msg(), and uv\+Create\+Task().

\mbox{\Hypertarget{uvfr__state__engine_8c_adf72ba7c523983f40c8c49f8de261164}\label{uvfr__state__engine_8c_adf72ba7c523983f40c8c49f8de261164}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!meta\_task\_handle@{meta\_task\_handle}}
\index{meta\_task\_handle@{meta\_task\_handle}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{meta\_task\_handle}{meta\_task\_handle}}
{\footnotesize\ttfamily i$<$\mbox{\hyperlink{uvfr__state__engine_8c_af070a24ce066297b4a8276ddcb884b0c}{\+\_\+next\+\_\+task\+\_\+id}}; i++)\{ \mbox{\hyperlink{uvfr__state__engine_8c_a6d61ec413dd0559ba8013f00058e7b8a}{\+\_\+task\+\_\+register}}\mbox{[}i\mbox{]}.manager = N\+U\+LL; \} Task\+Handle\+\_\+t scd\+\_\+handle = ((\mbox{\hyperlink{structstate__change__daemon__args}{state\+\_\+change\+\_\+daemon\+\_\+args}}$\ast$)args)-\/$>$ meta\+\_\+task\+\_\+handle}



Definition at line 594 of file uvfr\+\_\+state\+\_\+engine.\+c.

\mbox{\Hypertarget{uvfr__state__engine_8c_a2ce6eef16a78c095592954d2fe68af2e}\label{uvfr__state__engine_8c_a2ce6eef16a78c095592954d2fe68af2e}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!previous\_state@{previous\_state}}
\index{previous\_state@{previous\_state}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{previous\_state}{previous\_state}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4}{uv\+\_\+vehicle\+\_\+state\+\_\+t}} previous\+\_\+state = \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff}{U\+V\+\_\+\+B\+O\+OT}}}



Definition at line 20 of file uvfr\+\_\+state\+\_\+engine.\+c.



Referenced by change\+Vehicle\+State().

\mbox{\Hypertarget{uvfr__state__engine_8c_a6837d935e61f84062544da8971a18560}\label{uvfr__state__engine_8c_a6837d935e61f84062544da8971a18560}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!state\_change\_queue@{state\_change\_queue}}
\index{state\_change\_queue@{state\_change\_queue}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{state\_change\_queue}{state\_change\_queue}}
{\footnotesize\ttfamily Queue\+Handle\+\_\+t state\+\_\+change\+\_\+queue = N\+U\+LL}



Definition at line 17 of file uvfr\+\_\+state\+\_\+engine.\+c.

\mbox{\Hypertarget{uvfr__state__engine_8c_a2f58cf65b3566bc390600f877f8bed35}\label{uvfr__state__engine_8c_a2f58cf65b3566bc390600f877f8bed35}} 
\index{uvfr\_state\_engine.c@{uvfr\_state\_engine.c}!vehicle\_state@{vehicle\_state}}
\index{vehicle\_state@{vehicle\_state}!uvfr\_state\_engine.c@{uvfr\_state\_engine.c}}
\doxysubsubsection{\texorpdfstring{vehicle\_state}{vehicle\_state}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4}{uv\+\_\+vehicle\+\_\+state\+\_\+t}} vehicle\+\_\+state = \mbox{\hyperlink{uvfr__utils_8h_a259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff}{U\+V\+\_\+\+B\+O\+OT}}}



Definition at line 19 of file uvfr\+\_\+state\+\_\+engine.\+c.



Referenced by \+\_\+state\+Change\+Daemon(), and change\+Vehicle\+State().

