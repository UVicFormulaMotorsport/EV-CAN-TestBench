\hypertarget{can_8h}{}\doxysection{Core/\+Inc/can.h File Reference}
\label{can_8h}\index{Core/Inc/can.h@{Core/Inc/can.h}}


This file contains all the function prototypes for the \mbox{\hyperlink{can_8c}{can.\+c}} file.  


{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}constants.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}uvfr\+\_\+utils.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{can_8h_a8258cafd2b5e0bfb1e4228e7a45750bf}{C\+A\+N\+\_\+\+T\+X\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+N\+A\+ME}}~\char`\"{}Can\+Tx\+Daemon\char`\"{}
\item 
\#define \mbox{\hyperlink{can_8h_a3cb7727094f40357f18ece08758738cc}{C\+A\+N\+\_\+\+R\+X\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+N\+A\+ME}}~\char`\"{}Can\+Rx\+Daemon\char`\"{}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structuv___c_a_n__msg}{uv\+\_\+\+C\+A\+N\+\_\+msg}} \mbox{\hyperlink{can_8h_ad857192b5d0529e73642f1293d6bed75}{uv\+\_\+\+C\+A\+N\+\_\+msg}}
\item 
typedef enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\+\_\+status}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{can_8h_a1ee5cd592134235b6c07f676784d47c3}{M\+X\+\_\+\+C\+A\+N2\+\_\+\+Init}} (void)
\item 
void \mbox{\hyperlink{can_8h_a4e0742fef0f265347a75b7fa12012229}{H\+A\+L\+\_\+\+C\+A\+N\+\_\+\+Rx\+Fifo0\+Msg\+Pending\+Callback}} (C\+A\+N\+\_\+\+Handle\+Type\+Def $\ast$\mbox{\hyperlink{stm32f4xx__it_8c_ab77168d14df04ccca5d48612ee21ced8}{hcan2}})
\item 
void \mbox{\hyperlink{can_8h_a4c51ef84434a42d4c5f9524d361c0703}{H\+A\+L\+\_\+\+C\+A\+N\+\_\+\+Rx\+Fifo1\+Msg\+Pending\+Callback}} (C\+A\+N\+\_\+\+Handle\+Type\+Def $\ast$\mbox{\hyperlink{stm32f4xx__it_8c_ab77168d14df04ccca5d48612ee21ced8}{hcan2}})
\item 
\mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\+\_\+status}} \mbox{\hyperlink{can_8h_acc24d5acdcc2015b59e63769a397353b}{uv\+Send\+Can\+M\+SG}} (\mbox{\hyperlink{structuv___c_a_n__msg}{uv\+\_\+\+C\+A\+N\+\_\+msg}} $\ast$msg)
\begin{DoxyCompactList}\small\item\em Function to send can message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{can_8h_a2357e197a9ac26277eec808769fe409f}{C\+A\+Nbus\+Tx\+Svc\+Daemon}} (void $\ast$args)
\begin{DoxyCompactList}\small\item\em Background task that handles any C\+AN messages that are being sent. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
C\+A\+N\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{can_8h_ab77168d14df04ccca5d48612ee21ced8}{hcan2}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains all the function prototypes for the \mbox{\hyperlink{can_8c}{can.\+c}} file. 

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
Copyright (c) 2023 S\+T\+Microelectronics. All rights reserved.

This software is licensed under terms that can be found in the L\+I\+C\+E\+N\+SE file in the root directory of this software component. If no L\+I\+C\+E\+N\+SE file comes with this software, it is provided A\+S-\/\+IS. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{can_8h_a3cb7727094f40357f18ece08758738cc}\label{can_8h_a3cb7727094f40357f18ece08758738cc}} 
\index{can.h@{can.h}!CAN\_RX\_DAEMON\_NAME@{CAN\_RX\_DAEMON\_NAME}}
\index{CAN\_RX\_DAEMON\_NAME@{CAN\_RX\_DAEMON\_NAME}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{CAN\_RX\_DAEMON\_NAME}{CAN\_RX\_DAEMON\_NAME}}
{\footnotesize\ttfamily \#define C\+A\+N\+\_\+\+R\+X\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+N\+A\+ME~\char`\"{}Can\+Rx\+Daemon\char`\"{}}



Definition at line 41 of file can.\+h.

\mbox{\Hypertarget{can_8h_a8258cafd2b5e0bfb1e4228e7a45750bf}\label{can_8h_a8258cafd2b5e0bfb1e4228e7a45750bf}} 
\index{can.h@{can.h}!CAN\_TX\_DAEMON\_NAME@{CAN\_TX\_DAEMON\_NAME}}
\index{CAN\_TX\_DAEMON\_NAME@{CAN\_TX\_DAEMON\_NAME}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{CAN\_TX\_DAEMON\_NAME}{CAN\_TX\_DAEMON\_NAME}}
{\footnotesize\ttfamily \#define C\+A\+N\+\_\+\+T\+X\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+N\+A\+ME~\char`\"{}Can\+Tx\+Daemon\char`\"{}}



Definition at line 40 of file can.\+h.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{can_8h_ad857192b5d0529e73642f1293d6bed75}\label{can_8h_ad857192b5d0529e73642f1293d6bed75}} 
\index{can.h@{can.h}!uv\_CAN\_msg@{uv\_CAN\_msg}}
\index{uv\_CAN\_msg@{uv\_CAN\_msg}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{uv\_CAN\_msg}{uv\_CAN\_msg}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structuv___c_a_n__msg}{uv\+\_\+\+C\+A\+N\+\_\+msg}} \mbox{\hyperlink{structuv___c_a_n__msg}{uv\+\_\+\+C\+A\+N\+\_\+msg}}}



Definition at line 43 of file can.\+h.

\mbox{\Hypertarget{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}\label{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}} 
\index{can.h@{can.h}!uv\_status@{uv\_status}}
\index{uv\_status@{uv\_status}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{uv\_status}{uv\_status}}
{\footnotesize\ttfamily typedef enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\+\_\+status}}}



Definition at line 44 of file can.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{can_8h_a2357e197a9ac26277eec808769fe409f}\label{can_8h_a2357e197a9ac26277eec808769fe409f}} 
\index{can.h@{can.h}!CANbusTxSvcDaemon@{CANbusTxSvcDaemon}}
\index{CANbusTxSvcDaemon@{CANbusTxSvcDaemon}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{CANbusTxSvcDaemon()}{CANbusTxSvcDaemon()}}
{\footnotesize\ttfamily void C\+A\+Nbus\+Tx\+Svc\+Daemon (\begin{DoxyParamCaption}\item[{void $\ast$}]{args }\end{DoxyParamCaption})}



Background task that handles any C\+AN messages that are being sent. 

This task sits idle, until the time is right (it receives a notification from the uv\+Send\+Can\+M\+SG function) Once this condition has been met, it will actually call the {\ttfamily H\+A\+L\+\_\+\+C\+A\+N\+\_\+\+Add\+Tx\+Message} function. This is a very high priority task, meaning that it will pause whatever other code is going in order to run 

Definition at line 358 of file can.\+c.



References uv\+\_\+\+C\+A\+N\+\_\+msg\+::data, uv\+\_\+\+C\+A\+N\+\_\+msg\+::dlc, uv\+\_\+\+C\+A\+N\+\_\+msg\+::flags, hcan2, uv\+\_\+\+C\+A\+N\+\_\+msg\+::msg\+\_\+id, Tx\+\_\+msg\+\_\+queue, Tx\+Header, Tx\+Mailbox, and U\+V\+\_\+\+C\+A\+N\+\_\+\+E\+X\+T\+E\+N\+D\+E\+D\+\_\+\+ID.



Referenced by uv\+S\+V\+C\+Task\+Manager().

\mbox{\Hypertarget{can_8h_a4e0742fef0f265347a75b7fa12012229}\label{can_8h_a4e0742fef0f265347a75b7fa12012229}} 
\index{can.h@{can.h}!HAL\_CAN\_RxFifo0MsgPendingCallback@{HAL\_CAN\_RxFifo0MsgPendingCallback}}
\index{HAL\_CAN\_RxFifo0MsgPendingCallback@{HAL\_CAN\_RxFifo0MsgPendingCallback}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{HAL\_CAN\_RxFifo0MsgPendingCallback()}{HAL\_CAN\_RxFifo0MsgPendingCallback()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+C\+A\+N\+\_\+\+Rx\+Fifo0\+Msg\+Pending\+Callback (\begin{DoxyParamCaption}\item[{C\+A\+N\+\_\+\+Handle\+Type\+Def $\ast$}]{hcan2 }\end{DoxyParamCaption})}



Definition at line 267 of file can.\+c.



References Error\+\_\+\+Handler(), hcan2, Rx\+Data, and Rx\+Header.

\mbox{\Hypertarget{can_8h_a4c51ef84434a42d4c5f9524d361c0703}\label{can_8h_a4c51ef84434a42d4c5f9524d361c0703}} 
\index{can.h@{can.h}!HAL\_CAN\_RxFifo1MsgPendingCallback@{HAL\_CAN\_RxFifo1MsgPendingCallback}}
\index{HAL\_CAN\_RxFifo1MsgPendingCallback@{HAL\_CAN\_RxFifo1MsgPendingCallback}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{HAL\_CAN\_RxFifo1MsgPendingCallback()}{HAL\_CAN\_RxFifo1MsgPendingCallback()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+C\+A\+N\+\_\+\+Rx\+Fifo1\+Msg\+Pending\+Callback (\begin{DoxyParamCaption}\item[{C\+A\+N\+\_\+\+Handle\+Type\+Def $\ast$}]{hcan2 }\end{DoxyParamCaption})}



Definition at line 303 of file can.\+c.

\mbox{\Hypertarget{can_8h_a1ee5cd592134235b6c07f676784d47c3}\label{can_8h_a1ee5cd592134235b6c07f676784d47c3}} 
\index{can.h@{can.h}!MX\_CAN2\_Init@{MX\_CAN2\_Init}}
\index{MX\_CAN2\_Init@{MX\_CAN2\_Init}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{MX\_CAN2\_Init()}{MX\_CAN2\_Init()}}
{\footnotesize\ttfamily void M\+X\+\_\+\+C\+A\+N2\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line 119 of file can.\+c.



References Error\+\_\+\+Handler(), hcan2, and Tx\+Header.



Referenced by main().

\mbox{\Hypertarget{can_8h_acc24d5acdcc2015b59e63769a397353b}\label{can_8h_acc24d5acdcc2015b59e63769a397353b}} 
\index{can.h@{can.h}!uvSendCanMSG@{uvSendCanMSG}}
\index{uvSendCanMSG@{uvSendCanMSG}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{uvSendCanMSG()}{uvSendCanMSG()}}
{\footnotesize\ttfamily \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\+\_\+status}} uv\+Send\+Can\+M\+SG (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structuv___c_a_n__msg}{uv\+\_\+\+C\+A\+N\+\_\+msg}} $\ast$}]{msg }\end{DoxyParamCaption})}



Function to send can message. 

This function is the canonical team method of sending a C\+AN message. It invokes the can\+Tx\+Daemon, to avoid any conflicts due to a context switch mid transmission Is it a little bit convoluted? Yes. Is that worth it? Still yes. Check that the C\+AN Tx daemon is actually active

Definition at line 320 of file can.\+c.



References C\+A\+N\+\_\+\+T\+X\+\_\+\+D\+A\+E\+M\+O\+N\+\_\+\+N\+A\+ME, Tx\+\_\+msg\+\_\+queue, U\+V\+\_\+\+E\+R\+R\+OR, and U\+V\+\_\+\+OK.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{can_8h_ab77168d14df04ccca5d48612ee21ced8}\label{can_8h_ab77168d14df04ccca5d48612ee21ced8}} 
\index{can.h@{can.h}!hcan2@{hcan2}}
\index{hcan2@{hcan2}!can.h@{can.h}}
\doxysubsubsection{\texorpdfstring{hcan2}{hcan2}}
{\footnotesize\ttfamily C\+A\+N\+\_\+\+Handle\+Type\+Def hcan2}



Definition at line 116 of file can.\+c.



Referenced by I\+M\+D\+\_\+\+Request\+\_\+\+Status(), main(), M\+C\+\_\+\+Request\+\_\+\+Data(), M\+C\+\_\+\+Send\+\_\+\+Data(), P\+D\+U\+\_\+disable\+\_\+brake\+\_\+light(), P\+D\+U\+\_\+disable\+\_\+coolant\+\_\+pump(), P\+D\+U\+\_\+disable\+\_\+cooling\+\_\+fans(), P\+D\+U\+\_\+disable\+\_\+motor\+\_\+controller(), P\+D\+U\+\_\+disable\+\_\+shutdown\+\_\+circuit(), P\+D\+U\+\_\+enable\+\_\+brake\+\_\+light(), P\+D\+U\+\_\+enable\+\_\+coolant\+\_\+pump(), P\+D\+U\+\_\+enable\+\_\+cooling\+\_\+fans(), P\+D\+U\+\_\+enable\+\_\+motor\+\_\+controller(), P\+D\+U\+\_\+enable\+\_\+shutdown\+\_\+circuit(), P\+D\+U\+\_\+speaker\+\_\+chirp(), temp\+Monitor\+Task(), Update\+\_\+\+Batt\+\_\+\+Temp(), Update\+\_\+\+R\+P\+M(), and Update\+\_\+\+State\+\_\+\+Of\+\_\+\+Charge().

